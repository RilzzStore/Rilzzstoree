<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SpinLucky999 | Bonus 3JT | SuperJackpot</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gold: #FFD700;
            --gold-dark: #DAA520;
            --gold-light: #FFEC8B;
            --red: #FF0055;
            --blue: #00FFFF;
            --green: #00FF00;
            --purple: #9D00FF;
            --dark: #0A0A0A;
            --card-bg: #111108;
            --success: #00FF00;
            --warning: #FFA500;
            --pending: #FFA500;
            --approved: #00FF00;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000000;
        }
        
        /* APK CONTAINER */
        .apk-container {
            width: 100%;
            max-width: 375px;
            height: 100vh;
            margin: 0 auto;
            background: linear-gradient(135deg, #000000 0%, #0F0C00 100%);
            position: relative;
            overflow: hidden;
            display: none;
        }
        
        .apk-container.active {
            display: block;
        }
        
        /* STATUS BAR */
        .status-bar {
            height: 25px;
            background: #000000;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            font-size: 11px;
            color: var(--gold);
            border-bottom: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        /* HEADER */
        .header {
            padding: 15px;
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .user-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .balance-display {
            text-align: center;
            padding: 12px;
            background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
            border-radius: 10px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }
        
        .balance-text {
            font-size: 11px;
            color: var(--gold);
            opacity: 0.8;
            margin-bottom: 4px;
        }
        
        .balance-amount {
            font-size: 22px;
            color: var(--gold);
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        /* PAGES CONTAINER */
        .pages-container {
            height: calc(100vh - 180px);
            position: relative;
            overflow: hidden;
        }
        
        /* PAGE CONTENT - PER PAGE TERPISAH */
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            padding: 15px;
            -webkit-overflow-scrolling: touch;
            transition: transform 0.3s ease;
            background: linear-gradient(135deg, #000000 0%, #0F0C00 100%);
            display: none;
        }
        
        .page.active {
            display: block;
            transform: translateX(0);
        }
        
        .page.slide-left {
            transform: translateX(-100%);
        }
        
        .page.slide-right {
            transform: translateX(100%);
        }
        
        /* BANNER HANYA DI HOME */
        .banner-container {
            width: 100%;
            height: 130px;
            border-radius: 12px;
            overflow: hidden;
            margin: 0 0 20px 0;
            border: 2px solid var(--gold);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.2);
        }
        
        .banner-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* SECTION TITLE */
        .section-title {
            font-size: 16px;
            color: var(--gold);
            font-weight: 600;
            margin: 0 0 15px 0;
            padding-left: 10px;
            border-left: 3px solid var(--gold);
        }
        
        /* GAME GRID - PAGE HOME */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .game-card {
            background: linear-gradient(135deg, rgba(26,22,0,0.8), rgba(58,50,0,0.8));
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 12px 8px;
            text-align: center;
            transition: all 0.2s ease;
            cursor: pointer;
            overflow: hidden;
        }
        
        .game-card:active {
            transform: scale(0.95);
            border-color: var(--gold);
        }
        
        .game-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 6px;
            margin-bottom: 8px;
            background: rgba(255, 215, 0, 0.1);
        }
        
        .game-name {
            font-size: 11px;
            color: var(--gold);
            font-weight: 500;
            line-height: 1.3;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* DEPOSIT FORM - PAGE DEPOSIT */
        .deposit-form {
            background: linear-gradient(135deg, rgba(17,17,8,0.95), rgba(34,34,17,0.95));
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 0 0 20px 0;
        }
        
        /* WITHDRAW FORM - PAGE WITHDRAW */
        .withdraw-form {
            background: linear-gradient(135deg, rgba(8,17,17,0.95), rgba(17,34,34,0.95));
            border: 1px solid rgba(0, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 0 0 20px 0;
        }
        
        /* PROFILE CARD - PAGE PROFILE */
        .profile-card {
            background: linear-gradient(135deg, rgba(17,8,17,0.95), rgba(34,17,34,0.95));
            border: 1px solid rgba(157, 0, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 0 0 20px 0;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            color: var(--gold);
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            color: white;
            font-size: 15px;
            outline: none;
            transition: border 0.3s;
        }
        
        .form-input:focus {
            border-color: var(--gold);
            background: rgba(0, 0, 0, 0.6);
        }
        
        .amount-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 15px 0;
        }
        
        .amount-option {
            padding: 12px 5px;
            background: rgba(255, 215, 0, 0.08);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            color: var(--gold);
            font-size: 13px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .amount-option.active {
            background: linear-gradient(45deg, #B22222, #8B0000);
            color: white;
            border-color: var(--gold);
            font-weight: 600;
        }
        
        .amount-option:active {
            transform: scale(0.95);
        }
        
        /* UPLOAD AREA */
        .upload-area {
            border: 2px dashed rgba(255, 215, 0, 0.3);
            border-radius: 10px;
            padding: 25px 15px;
            text-align: center;
            background: rgba(0, 0, 0, 0.3);
            margin: 20px 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .upload-area:hover {
            border-color: var(--gold);
            background: rgba(0, 0, 0, 0.4);
        }
        
        .upload-icon {
            font-size: 32px;
            color: var(--gold);
            margin-bottom: 10px;
        }
        
        .upload-text {
            color: var(--gold);
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .upload-note {
            color: rgba(255, 215, 0, 0.6);
            font-size: 11px;
        }
        
        .preview-container {
            margin: 15px 0;
            text-align: center;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            border: 2px solid var(--gold);
        }
        
        /* SUBMIT BUTTON */
        .submit-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #B22222, #8B0000);
            border: 2px solid var(--gold);
            border-radius: 10px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 15px;
        }
        
        .submit-btn:active {
            transform: translateY(2px);
            opacity: 0.9;
        }
        
        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ACC ADMIN INFO */
        .acc-info {
            background: linear-gradient(135deg, rgba(255,165,0,0.1), rgba(255,215,0,0.05));
            border: 1px solid rgba(255, 165, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }
        
        .acc-title {
            color: var(--warning);
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .acc-timer {
            font-size: 24px;
            color: var(--gold);
            font-weight: 700;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }
        
        .acc-note {
            color: rgba(255, 215, 0, 0.8);
            font-size: 12px;
            line-height: 1.4;
        }
        
        /* DEPOSIT HISTORY */
        .history-section {
            margin: 25px 0;
        }
        
        .history-item {
            background: rgba(255, 215, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-amount {
            color: var(--gold);
            font-weight: 600;
            font-size: 14px;
        }
        
        .history-time {
            color: rgba(255, 215, 0, 0.6);
            font-size: 11px;
        }
        
        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 10px;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 165, 0, 0.2);
            color: var(--warning);
        }
        
        .status-approved {
            background: rgba(0, 255, 0, 0.2);
            color: var(--success);
        }
        
        /* PROFILE STATS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: rgba(255, 215, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-label {
            color: var(--blue);
            font-size: 11px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .stat-value {
            color: var(--gold);
            font-size: 16px;
            font-weight: 600;
        }
        
        /* NAVIGATION */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 375px;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 215, 0, 0.2);
            display: flex;
            padding: 8px 0;
            z-index: 1000;
        }
        
        .nav-item {
            flex: 1;
            text-align: center;
            padding: 8px 0;
            color: rgba(255, 215, 0, 0.5);
            text-decoration: none;
            transition: all 0.3s;
            background: none;
            border: none;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: var(--gold);
        }
        
        .nav-icon {
            font-size: 18px;
            margin-bottom: 4px;
        }
        
        .nav-text {
            font-size: 10px;
            font-weight: 500;
        }
        
        /* AUTH SCREENS */
        .auth-screen {
            width: 100%;
            max-width: 375px;
            height: 100vh;
            margin: 0 auto;
            background: linear-gradient(135deg, #000000 0%, #0F0C00 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .auth-screen.hidden {
            display: none;
        }
        
        .auth-logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-title {
            font-size: 28px;
            background: linear-gradient(45deg, var(--gold), var(--gold-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .auth-subtitle {
            color: rgba(255, 215, 0, 0.7);
            font-size: 14px;
        }
        
        .auth-form {
            width: 100%;
            max-width: 320px;
        }
        
        .auth-input {
            width: 100%;
            padding: 14px;
            margin-bottom: 15px;
            background: rgba(255, 215, 0, 0.05);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 8px;
            color: var(--gold);
            font-size: 14px;
            outline: none;
        }
        
        .auth-input::placeholder {
            color: rgba(255, 215, 0, 0.5);
        }
        
        .auth-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(45deg, #B22222, #8B0000);
            border: none;
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .auth-btn:active {
            transform: translateY(2px);
        }
        
        .auth-switch {
            text-align: center;
            margin-top: 20px;
            color: rgba(255, 215, 0, 0.7);
            font-size: 13px;
        }
        
        .auth-link {
            color: var(--gold);
            text-decoration: none;
            font-weight: 600;
            margin-left: 5px;
        }
        
        /* NOTIFICATION */
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(17, 17, 8, 0.95);
            border: 1px solid var(--gold);
            border-radius: 8px;
            padding: 12px 20px;
            color: var(--gold);
            font-size: 14px;
            font-weight: 500;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 90%;
            text-align: center;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                transform: translateX(-50%) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }
        
        .notification.show {
            opacity: 1;
        }
        
        /* DEPOSIT NOTIFICATION MODAL */
        .deposit-notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, #8B0000, #B22222);
            border: 2px solid var(--gold);
            border-radius: 10px;
            padding: 15px 20px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s;
            max-width: 90%;
            text-align: center;
            animation: slideDown 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.3);
        }
        
        .deposit-notification.show {
            opacity: 1;
        }
        
        /* MODAL DEPOSIT NOTIFICATION */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal-content {
            background: linear-gradient(135deg, rgba(17,17,8,0.95), rgba(34,34,17,0.95));
            border: 2px solid var(--gold);
            border-radius: 12px;
            padding: 25px;
            width: 90%;
            max-width: 320px;
            text-align: center;
        }
        
        .modal-icon {
            font-size: 50px;
            color: var(--gold);
            margin-bottom: 15px;
        }
        
        .modal-title {
            color: var(--gold);
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .modal-text {
            color: rgba(255, 215, 0, 0.8);
            font-size: 14px;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .modal-btn {
            padding: 12px 30px;
            background: linear-gradient(45deg, #B22222, #8B0000);
            border: 1px solid var(--gold);
            border-radius: 8px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
        }
        
        /* LOADING */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }
        
        .loading.active {
            display: flex;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 215, 0, 0.2);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* SCROLLBAR */
        .page::-webkit-scrollbar {
            width: 3px;
        }
        
        .page::-webkit-scrollbar-track {
            background: rgba(255, 215, 0, 0.05);
        }
        
        .page::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 3px;
        }
        
        /* MENU ICONS */
        .menu-icon {
            width: 24px;
            height: 24px;
            margin: 0 auto 4px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <!-- AUTH SCREEN -->
    <div class="auth-screen" id="authScreen">
        <div class="auth-logo">
            <div class="auth-title">SpinLucky999</div>
            <div class="auth-subtitle">Bonus 3 Juta ‚Ä¢ Deposit 300K</div>
        </div>
        
        <div class="auth-form" id="loginForm">
            <input type="text" class="auth-input" id="loginUsername" placeholder="Username" autocomplete="username">
            <input type="password" class="auth-input" id="loginPassword" placeholder="Password" autocomplete="current-password">
            <button class="auth-btn" onclick="login()">LOGIN</button>
            <div class="auth-switch">
                Belum punya akun?
                <a href="#" class="auth-link" onclick="showRegister()">Daftar disini</a>
            </div>
        </div>
        
        <div class="auth-form" id="registerForm" style="display: none;">
            <input type="text" class="auth-input" id="regUsername" placeholder="Username (3-20 karakter)">
            <input type="password" class="auth-input" id="regPassword" placeholder="Password (min 6 karakter)">
            <input type="password" class="auth-input" id="regConfirmPassword" placeholder="Konfirmasi Password">
            <input type="tel" class="auth-input" id="regPhone" placeholder="Nomor WhatsApp (08xxx)">
            <button class="auth-btn" onclick="register()">DAFTAR & DAPAT 3 JUTA</button>
            <div class="auth-switch">
                Sudah punya akun?
                <a href="#" class="auth-link" onclick="showLogin()">Login disini</a>
            </div>
        </div>
    </div>
    
    <!-- MAIN APK -->
    <div class="apk-container" id="apkContainer">
        <!-- STATUS BAR -->
        <div class="status-bar">
            <span id="currentTime">12:00</span>
            <span><i class="fas fa-wifi"></i> <i class="fas fa-signal"></i> 5G</span>
            <span><i class="fas fa-battery-full"></i> <span id="batteryLevel">100%</span></span>
        </div>
        
        <!-- HEADER -->
        <div class="header">
            <div class="user-info">
                <div>
                    <div style="color: var(--gold); font-weight: 600; font-size: 16px;">SpinLucky999</div>
                    <div style="color: rgba(255,215,0,0.7); font-size: 12px;" id="userGreeting">Welcome, User</div>
                </div>
                <button onclick="logout()" style="background: none; border: none; color: var(--gold); font-size: 20px; cursor: pointer;">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </div>
            
            <div class="balance-display">
                <div class="balance-text">SALDO ANDA</div>
                <div class="balance-amount" id="userBalance">Rp 0</div>
                <div style="color: #00FF00; font-size: 11px; margin-top: 5px;" id="bonusInfo"></div>
            </div>
        </div>
        
        <!-- PAGES CONTAINER -->
        <div class="pages-container">
            <!-- HOME PAGE -->
            <div class="page active" id="homePage">
                <div class="banner-container">
                    <img src="banner.png" class="banner-img" alt="Banner Promo"
                         onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwMCIgaGVpZ2h0PSIyMDAiIHZpZXdCb3g9IjAgMCAxMDAwIDIwMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiMxQTE2MDAiLz48dGV4dCB4PSI1MDAiIHk9IjEwMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI4IiBmaWxsPSIjRkZEODAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIj5HT0xEIFZJUCBTTE9UPC90ZXh0Pjx0ZXh0IHg9IjUwMCIgeT0iMTQwIiBmb250LWZhbWlsaWVzPSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSI+Qk9OVVMgM01JTElBUiB8IERFUE9TSVQgNTBLIFVLVVI8L3RleHQ+PC9zdmc+'">
                </div>
                
                <div class="section-title">üéÆ GAMES TERPOPULER</div>
                <div class="game-grid" id="gameGrid">
                    <!-- Games will be loaded here -->
                </div>
            </div>
            
            <!-- DEPOSIT PAGE -->
            <div class="page" id="depositPage">
                <div class="section-title">üí≥ DEPOSIT SALDO</div>
                <div class="deposit-form">
                    <div class="form-group">
                        <div class="form-label">Pilih Nominal Deposit</div>
                        <div class="amount-grid" id="amountGrid">
                            <!-- Amount options will be loaded here -->
                        </div>
                        <input type="number" class="form-input" id="depositAmount" placeholder="Atau masukkan nominal manual" min="50000">
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Nama Akun Anda</div>
                        <input type="text" class="form-input" id="playerName" placeholder="Masukkan username Anda">
                    </div>
                    
                    <div class="upload-area" onclick="uploadProof()" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-camera"></i>
                        </div>
                        <div class="upload-text">KLIK UNTUK UPLOAD SS TF</div>
                        <div class="upload-note">Screenshot bukti transfer dari aplikasi bank/e-wallet</div>
                        <input type="file" id="proofFile" accept="image/*" style="display: none;">
                    </div>
                    
                    <div class="preview-container" id="previewContainer" style="display: none;">
                        <img class="preview-image" id="previewImage" src="" alt="Preview Bukti Transfer">
                        <button onclick="removeProof()" style="background: #FF0055; color: white; border: none; padding: 8px 15px; border-radius: 6px; margin-top: 10px; font-size: 13px; cursor: pointer;">
                            <i class="fas fa-trash"></i> Hapus Gambar
                        </button>
                    </div>
                    
                    <div class="acc-info">
                        <div class="acc-title">‚è≥ TUNGGU ACC ADMIN</div>
                        <div class="acc-timer" id="accTimer">1-5 MENIT</div>
                        <div class="acc-note">
                            Deposit akan diproses manual oleh admin setelah bukti transfer diverifikasi.
                            Tidak perlu hubungi admin, sistem akan otomatis memberi notifikasi.
                        </div>
                    </div>
                    
                    <button class="submit-btn" onclick="submitDeposit()" id="depositBtn">
                        <i class="fas fa-paper-plane"></i> KIRIM DEPOSIT
                    </button>
                </div>
                
                <div class="history-section">
                    <div class="section-title">üìã RIWAYAT DEPOSIT</div>
                    <div id="depositHistory">
                        <!-- History will be loaded here -->
                    </div>
                </div>
            </div>
            
            <!-- WITHDRAW PAGE -->
            <div class="page" id="withdrawPage">
                <div class="section-title">üí∞ WITHDRAW SALDO</div>
                <div class="withdraw-form">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <div style="color: var(--blue); font-size: 14px; margin-bottom: 10px;">SALDO TERSEDIA UNTUK WD</div>
                        <div style="color: var(--gold); font-size: 32px; font-weight: 700;" id="availableBalance">Rp 0</div>
                        <div style="color: rgba(255,215,0,0.7); font-size: 12px; margin-top: 5px;" id="withdrawCondition"></div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Nomor E-Wallet</div>
                        <input type="text" class="form-input" id="wdNumber" placeholder="Contoh: 081234567890">
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Jumlah Withdraw</div>
                        <input type="number" class="form-input" id="wdAmount" placeholder="Minimal 50.000" min="50000">
                    </div>
                    
                    <div class="form-group">
                        <div class="form-label">Password Akun</div>
                        <input type="password" class="form-input" id="wdPassword" placeholder="Masukkan password untuk verifikasi">
                    </div>
                    
                    <div style="background: rgba(0,100,0,0.1); border: 1px solid rgba(0,255,0,0.3); border-radius: 8px; padding: 15px; margin: 25px 0; font-size: 12px; color: rgba(255,215,0,0.8); line-height: 1.5;">
                        <div style="color: #00FF00; font-weight: 600; margin-bottom: 8px; font-size: 13px;">
                            <i class="fas fa-info-circle"></i> KETENTUAN WITHDRAW:
                        </div>
                        ‚Ä¢ Minimal withdraw: Rp 50.000<br>
                        ‚Ä¢ Deposit minimal 1x untuk withdraw pertama<br>
                        ‚Ä¢ Bonus 3 juta bisa ditarik setelah deposit 50K<br>
                        ‚Ä¢ Proses: 5-15 menit (jam aktif 08:00-24:00)<br>
                        ‚Ä¢ Hanya ke rekening atas nama sendiri
                    </div>
                    
                    <button class="submit-btn" onclick="submitWithdraw()" id="withdrawBtn" style="background: linear-gradient(45deg, #006600, #009900);">
                        <i class="fas fa-money-bill-wave"></i> REQUEST WITHDRAW
                    </button>
                </div>
            </div>
            
            <!-- PROFILE PAGE -->
            <div class="page" id="profilePage">
                <div class="section-title">üë§ PROFIL ANDA</div>
                <div class="profile-card">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <div style="width: 80px; height: 80px; margin: 0 auto 15px; background: linear-gradient(45deg, var(--gold), var(--gold-light)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #000; font-size: 32px;">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div style="color: var(--gold); font-size: 20px; font-weight: 600;" id="profileUsername">Username</div>
                        <div style="color: rgba(255,215,0,0.7); font-size: 14px; margin-top: 5px;" id="profilePhone">-</div>
                        <div style="background: rgba(0,255,0,0.1); border: 1px solid rgba(0,255,0,0.3); border-radius: 20px; padding: 5px 15px; display: inline-block; margin-top: 10px;">
                            <span style="color: #00FF00; font-size: 12px; font-weight: 600;">
                                <i class="fas fa-circle"></i> STATUS: <span id="profileStatus">AKTIF</span>
                            </span>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-label">TOTAL DEPOSIT</div>
                            <div class="stat-value" id="totalDeposit">Rp 0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">TOTAL WITHDRAW</div>
                            <div class="stat-value" id="totalWithdraw">Rp 0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">TOTAL BONUS</div>
                            <div class="stat-value" id="totalBonus">Rp 0</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">TOTAL TARUHAN</div>
                            <div class="stat-value" id="totalBet">Rp 0</div>
                        </div>
                    </div>
                    
                    <button class="submit-btn" onclick="showHistory()" style="background: linear-gradient(45deg, #0066CC, #0033AA); margin-bottom: 10px;">
                        <i class="fas fa-history"></i> LIHAT RIWAYAT TRANSAKSI
                    </button>
                    
                    <button class="submit-btn" onclick="changePassword()" style="background: linear-gradient(45deg, #8B0000, #660000);">
                        <i class="fas fa-key"></i> GANTI PASSWORD
                    </button>
                </div>
            </div>
        </div>
        
        <!-- BOTTOM NAVIGATION -->
        <div class="bottom-nav">
            <button class="nav-item active" onclick="showPage('homePage')">
                <div class="menu-icon">üéÆ</div>
                <div class="nav-text">Games</div>
            </button>
            <button class="nav-item" onclick="showPage('depositPage')">
                <div class="menu-icon">üí≥</div>
                <div class="nav-text">Deposit</div>
            </button>
            <button class="nav-item" onclick="showPage('withdrawPage')">
                <div class="menu-icon">üí∞</div>
                <div class="nav-text">Withdraw</div>
            </button>
            <button class="nav-item" onclick="showPage('profilePage')">
                <div class="menu-icon">üë§</div>
                <div class="nav-text">Profile</div>
            </button>
        </div>
    </div>
    
    <!-- DEPOSIT NOTIFICATION -->
    <div class="deposit-notification" id="depositNotification">
        <i class="fas fa-exclamation-circle"></i> SILAKAN DEPOSIT TERLEBIH DAHULU!
    </div>
    
    <!-- MODAL DEPOSIT NOTIFICATION -->
    <div class="modal-overlay" id="depositModal">
        <div class="modal-content">
            <div class="modal-icon">üí∞</div>
            <div class="modal-title">Main Minimal Deposit</div>
            <div class="modal-text">
                Minimal deposit 50k untuk memainkan game ini.
                Silakan deposit minimal <span style="color: var(--gold); font-weight: bold;">Rp 50.000</span> terlebih dahulu.
            </div>
            <div style="display: flex; gap: 10px;">
                <button class="modal-btn" onclick="closeModal()" style="background: #666;">NANTI SAJA</button>
                <button class="modal-btn" onclick="goToDeposit()">DEPOSIT SEKARANG</button>
            </div>
        </div>
    </div>
    
    <!-- LOADING OVERLAY -->
    <div class="loading" id="loading">
        <div class="loading-spinner"></div>
    </div>
    
    <!-- NOTIFICATION -->
    <div class="notification" id="notification"></div>

    <script>
        // ============================
        // GLOBAL VARIABLES
        // ============================
        let currentUser = null;
        let users = JSON.parse(localStorage.getItem('goldSlotUsers')) || [];
        let deposits = JSON.parse(localStorage.getItem('goldSlotDeposits')) || [];
        let withdrawals = JSON.parse(localStorage.getItem('goldSlotWithdrawals')) || [];
        const BONUS_AMOUNT = 3000000;
        const MIN_DEPOSIT = 50000;
        const MIN_WITHDRAW = 50000;
        
        // Game Data dengan file PNG LU - game1.png, game2.png, dst
        const GAME_DATA = [
            { id: 1, name: "SWEET BONANZA", image: "game1.png" },
            { id: 2, name: "GATES OF OLYMPUS", image: "game2.png" },
            { id: 3, name: "STARLIGHT PRINCESS", image: "game3.png" },
            { id: 4, name: "AZTEC GEMS", image: "game4.png" },
            { id: 5, name: "5 LIONS MEGAWAYS", image: "game5.png" },
            { id: 6, name: "MAHJONG WAYS 2", image: "game6.png" },
            { id: 7, name: "WILD WEST GOLD", image: "game7.png" },
            { id: 8, name: "BUFFALO KING", image: "game8.png" },
            { id: 9, name: "BOOK OF DEAD", image: "game9.png" },
            { id: 10, name: "GEMS BONANZA", image: "game10.png" }
        ];
        
        // Amount Options
        const AMOUNT_OPTIONS = [50000, 100000, 200000, 500000, 1000000, 2000000];
        
        // ============================
        // INITIALIZATION
        // ============================
        document.addEventListener('DOMContentLoaded', function() {
            // Setup default admin
            setupDefaultAdmin();
            
            // Auto login check
            autoLogin();
            
            // Initialize time
            updateTime();
            setInterval(updateTime, 60000);
            
            // Initialize battery
            updateBattery();
            
            // Load games
            generateGames();
            
            // Load amount options
            generateAmountOptions();
            
            // Setup event listeners
            setupEventListeners();
        });
        
        // ============================
        // NOTIFICATION FUNCTIONS
        // ============================
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            
            if (type === 'success') {
                notification.style.borderColor = '#00FF00';
                notification.style.color = '#00FF00';
            } else if (type === 'error') {
                notification.style.borderColor = '#FF0000';
                notification.style.color = '#FF0000';
            } else {
                notification.style.borderColor = 'var(--gold)';
                notification.style.color = 'var(--gold)';
            }
            
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // FUNCTION KHUSUS UNTUK NOTIF DEPOSIT
        function showDepositNotification() {
            const depositNotif = document.getElementById('depositNotification');
            depositNotif.classList.add('show');
            
            // Animasi shake
            depositNotif.style.animation = 'none';
            setTimeout(() => {
                depositNotif.style.animation = 'slideDown 0.3s ease';
            }, 10);
            
            setTimeout(() => {
                depositNotif.classList.remove('show');
            }, 4000); // 4 detik
        }
        
        function showLoading(show) {
            const loading = document.getElementById('loading');
            if (show) {
                loading.classList.add('active');
            } else {
                loading.classList.remove('active');
            }
        }
        
        function formatCurrency(amount) {
            return 'Rp ' + amount.toLocaleString('id-ID');
        }
        
        function updateTime() {
            const now = new Date();
            const time = now.getHours().toString().padStart(2, '0') + ':' + 
                        now.getMinutes().toString().padStart(2, '0');
            document.getElementById('currentTime').textContent = time;
        }
        
        function updateBattery() {
            const levels = [100, 95, 90, 85, 80];
            const randomLevel = levels[Math.floor(Math.random() * levels.length)];
            document.getElementById('batteryLevel').textContent = randomLevel + '%';
            setInterval(updateBattery, 300000);
        }
        
        // ============================
        // PAGE MANAGEMENT - PER PAGE TERPISAH
        // ============================
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update nav buttons
            document.querySelectorAll('.nav-item').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Update active nav button
            const navBtn = document.querySelector(`.nav-item[onclick*="${pageId}"]`);
            if (navBtn) {
                navBtn.classList.add('active');
            }
            
            // Update data if needed
            if (pageId === 'depositPage') {
                loadDepositHistory();
            } else if (pageId === 'profilePage') {
                updateProfileStats();
            }
        }
        
        // ============================
        // MODAL FUNCTIONS
        // ============================
        function showDepositModal() {
            document.getElementById('depositModal').classList.add('active');
        }
        
        function closeModal() {
            document.getElementById('depositModal').classList.remove('active');
        }
        
        function goToDeposit() {
            closeModal();
            showPage('depositPage');
        }
        
        // ============================
        // AUTO LOGIN SYSTEM
        // ============================
        function autoLogin() {
            try {
                const lastUser = localStorage.getItem('lastLoggedInUser');
                if (lastUser) {
                    const user = users.find(u => u.username === lastUser);
                    if (user && user.isActive) {
                        currentUser = user;
                        showMainApp();
                        showNotification(`Welcome back, ${user.username}!`, 'success');
                        return true;
                    }
                }
            } catch (e) {
                console.log('Auto login error:', e);
            }
            return false;
        }
        
        // ============================
        // GAME FUNCTIONS - GABISA DIMAINKAN!
        // ============================
        function generateGames() {
            const gameGrid = document.getElementById('gameGrid');
            let html = '';
            
            GAME_DATA.forEach(game => {
                html += `
                    <div class="game-card" onclick="playGame(${game.id})">
                        <img src="${game.image}" class="game-image" alt="${game.name}"
                             onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiMxQTE2MDAiLz48dGV4dCB4PSI1MCIgeT0iNTAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiIgZmlsbD0iI0ZGRDgwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgc3R5bGU9IndvcmQtd3JhcDogYnJlYWstd29yZDsiPiR7Z2FtZS5uYW1lfTwvdGV4dD48L3N2Zz4='">
                        <div class="game-name">${game.name}</div>
                    </div>
                `;
            });
            
            gameGrid.innerHTML = html;
        }
        
        function playGame(gameId) {
            if (!currentUser) {
                showNotification('Silakan login terlebih dahulu!', 'error');
                return;
            }
            
            // **SELALU TAMPILKAN NOTIF DEPOSIT MESKI SALDO ADA**
            showDepositNotification();
            
            // **TAMPILKAN MODAL DEPOSIT OTOMATIS**
            setTimeout(() => {
                showDepositModal();
            }, 300);
            
            // **SIMPAN DATA GAME YG DICLICK (buat tracking marketing)**
            currentUser.lastGameClicked = gameId;
            currentUser.gameClickCount = (currentUser.gameClickCount || 0) + 1;
            localStorage.setItem('goldSlotUsers', JSON.stringify(users));
        }
        
        // ============================
        // AMOUNT SELECTION
        // ============================
        function generateAmountOptions() {
            const amountGrid = document.getElementById('amountGrid');
            let html = '';
            
            AMOUNT_OPTIONS.forEach(amount => {
                html += `
                    <div class="amount-option" onclick="selectAmount(${amount}, this)">
                        ${formatCurrency(amount)}
                    </div>
                `;
            });
            
            amountGrid.innerHTML = html;
        }
        
        function selectAmount(amount, element) {
            document.querySelectorAll('.amount-option').forEach(btn => {
                btn.classList.remove('active');
            });
            
            element.classList.add('active');
            document.getElementById('depositAmount').value = amount;
        }
        
        // ============================
        // AUTHENTICATION
        // ============================
        function showRegister() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('registerForm').style.display = 'block';
        }
        
        function showLogin() {
            document.getElementById('registerForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }
        
        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                showNotification('Username dan password harus diisi!', 'error');
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                const user = users.find(u => u.username === username && u.password === password);
                
                if (!user) {
                    showLoading(false);
                    showNotification('Username atau password salah!', 'error');
                    return;
                }
                
                if (!user.isActive) {
                    showLoading(false);
                    showNotification('Akun dinonaktifkan!', 'error');
                    return;
                }
                
                currentUser = user;
                localStorage.setItem('lastLoggedInUser', user.username);
                
                showMainApp();
                showLoading(false);
                showNotification(`Welcome back, ${user.username}!`, 'success');
            }, 800);
        }
        
        function register() {
            const username = document.getElementById('regUsername').value.trim();
            const password = document.getElementById('regPassword').value;
            const confirmPassword = document.getElementById('regConfirmPassword').value;
            const phone = document.getElementById('regPhone').value.trim();
            
            // Validations
            if (!username || username.length < 3) {
                showNotification('Username minimal 3 karakter!', 'error');
                return;
            }
            
            if (!password || password.length < 6) {
                showNotification('Password minimal 6 karakter!', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Password tidak cocok!', 'error');
                return;
            }
            
            if (!phone || !/^08[0-9]{8,11}$/.test(phone)) {
                showNotification('Nomor WhatsApp tidak valid!', 'error');
                return;
            }
            
            // Check if username exists
            if (users.find(u => u.username === username)) {
                showNotification('Username sudah terdaftar!', 'error');
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                // Create new user with bonus
                const newUser = {
                    id: Date.now(),
                    username: username,
                    password: password,
                    phone: phone,
                    balance: BONUS_AMOUNT,
                    totalDeposit: 0,
                    totalWithdraw: 0,
                    totalBonus: BONUS_AMOUNT,
                    totalBet: 0,
                    hasMadeDeposit: false,
                    isActive: true,
                    isAdmin: false,
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString()
                };
                
                users.push(newUser);
                localStorage.setItem('goldSlotUsers', JSON.stringify(users));
                
                currentUser = newUser;
                localStorage.setItem('lastLoggedInUser', newUser.username);
                
                showMainApp();
                showLoading(false);
                showNotification(`üéâ Daftar berhasil! Bonus 3 juta telah ditambahkan!`, 'success');
            }, 800);
        }
        
        function logout() {
            if (confirm('Yakin ingin logout?')) {
                currentUser = null;
                localStorage.removeItem('lastLoggedInUser');
                document.getElementById('apkContainer').classList.remove('active');
                document.getElementById('authScreen').classList.remove('hidden');
                showLogin();
                showNotification('Logout berhasil!', 'info');
            }
        }
        
        function showMainApp() {
            document.getElementById('authScreen').classList.add('hidden');
            document.getElementById('apkContainer').classList.add('active');
            updateUI();
        }
        
        // ============================
        // UI UPDATE FUNCTIONS
        // ============================
        function updateUI() {
            if (!currentUser) return;
            
            document.getElementById('userGreeting').textContent = `Hi, ${currentUser.username}`;
            document.getElementById('userBalance').textContent = formatCurrency(currentUser.balance);
            document.getElementById('availableBalance').textContent = formatCurrency(currentUser.balance);
            document.getElementById('profileUsername').textContent = currentUser.username;
            document.getElementById('profilePhone').textContent = currentUser.phone || '-';
            document.getElementById('profileStatus').textContent = currentUser.isActive ? 'AKTIF' : 'NONAKTIF';
            
            updateProfileStats();
            
            // Show bonus info
            const bonusInfo = document.getElementById('bonusInfo');
            if (currentUser.totalBonus > 0) {
                bonusInfo.textContent = `Bonus: ${formatCurrency(currentUser.totalBonus)}`;
            }
            
            // Show withdraw condition
            const withdrawCondition = document.getElementById('withdrawCondition');
            if (!currentUser.hasMadeDeposit && currentUser.totalBonus > 0) {
                withdrawCondition.textContent = 'Deposit minimal 300K untuk withdraw bonus';
                withdrawCondition.style.color = '#FFA500';
            } else {
                withdrawCondition.textContent = 'Bonus dapat ditarik';
                withdrawCondition.style.color = '#00FF00';
            }
            
            // Load deposit history
            loadDepositHistory();
        }
        
        function updateProfileStats() {
            if (!currentUser) return;
            
            document.getElementById('totalDeposit').textContent = formatCurrency(currentUser.totalDeposit);
            document.getElementById('totalWithdraw').textContent = formatCurrency(currentUser.totalWithdraw);
            document.getElementById('totalBonus').textContent = formatCurrency(currentUser.totalBonus);
            document.getElementById('totalBet').textContent = formatCurrency(currentUser.totalBet);
        }
        
        // ============================
        // DEPOSIT SYSTEM
        // ============================
        function uploadProof() {
            document.getElementById('proofFile').click();
        }
        
        function handleProofUpload(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('previewImage').src = e.target.result;
                    document.getElementById('previewContainer').style.display = 'block';
                    document.getElementById('uploadArea').style.display = 'none';
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        function removeProof() {
            document.getElementById('previewContainer').style.display = 'none';
            document.getElementById('uploadArea').style.display = 'block';
            document.getElementById('proofFile').value = '';
        }
        
        function submitDeposit() {
            if (!currentUser) {
                showNotification('Silakan login terlebih dahulu!', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('depositAmount').value);
            const playerName = document.getElementById('playerName').value.trim();
            const proofFile = document.getElementById('proofFile').files[0];
            
            // Validations
            if (!amount || amount < MIN_DEPOSIT) {
                showNotification(`Minimal deposit ${formatCurrency(MIN_DEPOSIT)}!`, 'error');
                return;
            }
            
            if (!playerName) {
                showNotification('Masukkan nama akun!', 'error');
                return;
            }
            
            if (playerName !== currentUser.username) {
                showNotification('Nama harus sama dengan username!', 'warning');
                return;
            }
            
            if (!proofFile) {
                showNotification('Upload bukti transfer terlebih dahulu!', 'error');
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                // Create deposit record
                const deposit = {
                    id: Date.now(),
                    userId: currentUser.id,
                    username: currentUser.username,
                    amount: amount,
                    playerName: playerName,
                    status: 'pending',
                    proof: 'uploaded',
                    createdAt: new Date().toISOString(),
                    processedAt: null
                };
                
                deposits.push(deposit);
                localStorage.setItem('goldSlotDeposits', JSON.stringify(deposits));
                
                // Mark as has made deposit
                if (!currentUser.hasMadeDeposit) {
                    currentUser.hasMadeDeposit = true;
                    localStorage.setItem('goldSlotUsers', JSON.stringify(users));
                }
                
                showNotification(`‚úÖ Deposit ${formatCurrency(amount)} berhasil diajukan! Tunggu ACC Admin`, 'success');
                
                // Reset form
                document.getElementById('depositAmount').value = '';
                document.getElementById('playerName').value = '';
                document.querySelectorAll('.amount-option').forEach(btn => {
                    btn.classList.remove('active');
                });
                removeProof();
                
                // Update UI
                updateUI();
                showLoading(false);
                
                // Simulate admin approval (2-5 minutes)
                setTimeout(() => {
                    approveDeposit(deposit.id);
                }, 120000 + Math.random() * 180000);
            }, 1000);
        }
        
        function approveDeposit(depositId) {
            const deposit = deposits.find(d => d.id === depositId);
            if (deposit) {
                deposit.status = 'approved';
                deposit.processedAt = new Date().toISOString();
                
                // Add to user balance
                const user = users.find(u => u.id === deposit.userId);
                if (user) {
                    user.balance += deposit.amount;
                    user.totalDeposit += deposit.amount;
                    localStorage.setItem('goldSlotUsers', JSON.stringify(users));
                    
                    // Update UI if current user
                    if (currentUser && currentUser.id === user.id) {
                        updateUI();
                        showNotification(`üéâ Deposit ${formatCurrency(deposit.amount)} sudah di-APPROVE!`, 'success');
                    }
                }
                
                localStorage.setItem('goldSlotDeposits', JSON.stringify(deposits));
                loadDepositHistory();
            }
        }
        
        function loadDepositHistory() {
            if (!currentUser) return;
            
            const userDeposits = deposits.filter(d => d.userId === currentUser.id);
            const historyDiv = document.getElementById('depositHistory');
            
            if (userDeposits.length === 0) {
                historyDiv.innerHTML = '<div style="color: rgba(255,215,0,0.5); text-align: center; padding: 20px; font-size: 13px;">Belum ada riwayat deposit</div>';
                return;
            }
            
            let html = '';
            userDeposits.slice(-5).reverse().forEach(deposit => {
                const statusClass = deposit.status === 'approved' ? 'status-approved' : 'status-pending';
                const statusText = deposit.status === 'approved' ? 'DITERIMA' : 'MENUNGGU';
                const time = new Date(deposit.createdAt).toLocaleDateString('id-ID', {
                    day: '2-digit',
                    month: 'short',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                html += `
                    <div class="history-item">
                        <div>
                            <div class="history-amount">${formatCurrency(deposit.amount)}</div>
                            <div class="history-time">${time}</div>
                        </div>
                        <div class="status-badge ${statusClass}">${statusText}</div>
                    </div>
                `;
            });
            
            historyDiv.innerHTML = html;
        }
        
        // ============================
        // WITHDRAW SYSTEM
        // ============================
        function submitWithdraw() {
            if (!currentUser) {
                showNotification('Silakan login terlebih dahulu!', 'error');
                return;
            }
            
            const amount = parseInt(document.getElementById('wdAmount').value);
            const phone = document.getElementById('wdNumber').value.trim();
            const password = document.getElementById('wdPassword').value;
            
            // Validations
            if (!amount || amount < MIN_WITHDRAW) {
                showNotification(`Minimal withdraw ${formatCurrency(MIN_WITHDRAW)}!`, 'error');
                return;
            }
            
            if (currentUser.balance < amount) {
                showNotification('Saldo tidak mencukupi!', 'error');
                return;
            }
            
            if (!phone || !/^08[0-9]{8,11}$/.test(phone)) {
                showNotification('Masukkan nomor yang valid!', 'error');
                return;
            }
            
            if (password !== currentUser.password) {
                showNotification('Password salah!', 'error');
                return;
            }
            
            // Check deposit requirement
            if (!currentUser.hasMadeDeposit && currentUser.totalBonus > 0) {
                showNotification('Deposit minimal 50K untuk withdraw pertama!', 'warning');
                showPage('depositPage');
                return;
            }
            
            showLoading(true);
            
            setTimeout(() => {
                // Create withdrawal
                const withdrawal = {
                    id: Date.now(),
                    userId: currentUser.id,
                    username: currentUser.username,
                    amount: amount,
                    phone: phone,
                    status: 'pending',
                    createdAt: new Date().toISOString()
                };
                
                withdrawals.push(withdrawal);
                localStorage.setItem('goldSlotWithdrawals', JSON.stringify(withdrawals));
                
                // Update user balance
                currentUser.balance -= amount;
                currentUser.totalWithdraw += amount;
                localStorage.setItem('goldSlotUsers', JSON.stringify(users));
                
                showNotification(`‚úÖ Withdraw ${formatCurrency(amount)} berhasil diajukan! Proses 5-15 menit`, 'success');
                
                // Reset form
                document.getElementById('wdAmount').value = '';
                document.getElementById('wdNumber').value = '';
                document.getElementById('wdPassword').value = '';
                
                // Update UI
                updateUI();
                showLoading(false);
                
                // Simulate processing (5-15 minutes)
                setTimeout(() => {
                    processWithdrawal(withdrawal.id);
                }, 300000 + Math.random() * 600000);
            }, 1000);
        }
        
        function processWithdrawal(withdrawalId) {
            const withdrawal = withdrawals.find(w => w.id === withdrawalId);
            if (withdrawal) {
                withdrawal.status = 'completed';
                withdrawal.processedAt = new Date().toISOString();
                localStorage.setItem('goldSlotWithdrawals', JSON.stringify(withdrawals));
                
                if (currentUser && currentUser.id === withdrawal.userId) {
                    showNotification(`üí∞ Withdraw ${formatCurrency(withdrawal.amount)} sudah dikirim!`, 'success');
                }
            }
        }
        
        // ============================
        // PROFILE FUNCTIONS
        // ============================
        function showHistory() {
            let message = 'üìã RIWAYAT TRANSAKSI\n\n';
            
            const userDeposits = deposits.filter(d => d.userId === currentUser.id);
            const userWithdrawals = withdrawals.filter(w => w.userId === currentUser.id);
            
            if (userDeposits.length > 0) {
                message += 'DEPOSIT:\n';
                userDeposits.slice(-5).reverse().forEach(d => {
                    message += `üí∞ ${formatCurrency(d.amount)} - ${d.status} - ${new Date(d.createdAt).toLocaleDateString('id-ID')}\n`;
                });
                message += '\n';
            }
            
            if (userWithdrawals.length > 0) {
                message += 'WITHDRAW:\n';
                userWithdrawals.slice(-5).reverse().forEach(w => {
                    message += `üí∏ ${formatCurrency(w.amount)} - ${w.status} - ${new Date(w.createdAt).toLocaleDateString('id-ID')}\n`;
                });
            }
            
            if (userDeposits.length === 0 && userWithdrawals.length === 0) {
                message += 'Belum ada transaksi.';
            }
            
            alert(message);
        }
        
        function changePassword() {
            const newPass = prompt('Password baru (min. 6 karakter):');
            if (newPass && newPass.length >= 6) {
                currentUser.password = newPass;
                localStorage.setItem('goldSlotUsers', JSON.stringify(users));
                showNotification('‚úÖ Password berhasil diganti!', 'success');
            } else if (newPass) {
                showNotification('Password minimal 6 karakter!', 'error');
            }
        }
        
        // ============================
        // SETUP FUNCTIONS
        // ============================
        function setupDefaultAdmin() {
            const adminExists = users.find(u => u.username === 'admin');
            if (!adminExists) {
                users.push({
                    id: 1,
                    username: 'admin',
                    password: 'admin123',
                    phone: '081234567890',
                    balance: 1000000000,
                    totalDeposit: 0,
                    totalWithdraw: 0,
                    totalBonus: 0,
                    totalBet: 0,
                    hasMadeDeposit: true,
                    isActive: true,
                    isAdmin: true,
                    createdAt: new Date().toISOString(),
                    lastLogin: null
                });
                localStorage.setItem('goldSlotUsers', JSON.stringify(users));
            }
        }
        
        function setupEventListeners() {
            // File upload
            document.getElementById('proofFile').addEventListener('change', function(e) {
                handleProofUpload(this);
            });
            
            // Enter key for login
            document.getElementById('loginPassword').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            // Enter key for register
            document.getElementById('regPhone').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') register();
            });
            
            // Auto select amount when typing
            document.getElementById('depositAmount').addEventListener('input', function(e) {
                const amount = parseInt(e.target.value) || 0;
                document.querySelectorAll('.amount-option').forEach(btn => {
                    const btnAmount = parseInt(btn.textContent.replace(/[^0-9]/g, ''));
                    if (btnAmount === amount) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            });
        }
        
        // Initialize on load
        setTimeout(() => {
            if (!autoLogin()) {
                document.getElementById('authScreen').classList.remove('hidden');
            }
        }, 500);
    </script>
</body>
</html>